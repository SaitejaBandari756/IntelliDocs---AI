{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\nexport async function sendChatMessage(docId, message) {\n  const res = await fetch(`${API_BASE}/documents/${docId}/chat/`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      message\n    })\n  });\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(`Chat error: ${res.status} - ${txt}`);\n  }\n  return res.json();\n}\nexport async function uploadText(text) {\n  const response = await fetch(`${API_BASE}/text/`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      text\n    })\n  });\n  return await response.json();\n}\nexport async function uploadDocument(file, title) {\n  const form = new FormData();\n  form.append(\"file\", file);\n  form.append(\"title\", title || file.name);\n  try {\n    const res = await fetch(`${API_BASE}/documents/`, {\n      method: \"POST\",\n      body: form\n    });\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`HTTP ${res.status} - ${text}`);\n    }\n    return await res.json();\n  } catch (err) {\n    console.error(\"Upload failed:\", err);\n    throw err;\n  }\n}\nexport async function getDocuments(id) {\n  const url = id ? `${API_BASE}/documents/${id}/` : `${API_BASE}/documents/`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(`Failed to load document(s): ${res.status} ${text}`);\n  }\n  return await res.json();\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","sendChatMessage","docId","message","res","fetch","method","headers","body","JSON","stringify","ok","txt","text","Error","status","json","uploadText","response","uploadDocument","file","title","form","FormData","append","name","err","console","error","getDocuments","id","url","catch"],"sources":["F:/github_projects/document_intelligence/frontend/src/services/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\r\n\r\nexport async function sendChatMessage(docId, message) {\r\n  const res = await fetch(`${API_BASE}/documents/${docId}/chat/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ message }),\r\n  });\r\n  if (!res.ok) {\r\n    const txt = await res.text();\r\n    throw new Error(`Chat error: ${res.status} - ${txt}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\n\r\nexport async function uploadText(text) {\r\n  const response = await fetch(`${API_BASE}/text/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ text }),\r\n  });\r\n\r\n  return await response.json();\r\n}\r\n\r\nexport async function uploadDocument(file, title) {\r\n  const form = new FormData();\r\n  form.append(\"file\", file);\r\n  form.append(\"title\", title || file.name);\r\n\r\n  try {\r\n    const res = await fetch(`${API_BASE}/documents/`, {\r\n      method: \"POST\",\r\n      body: form,\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const text = await res.text();\r\n      throw new Error(`HTTP ${res.status} - ${text}`);\r\n    }\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.error(\"Upload failed:\", err);\r\n    throw err; \r\n  }\r\n}\r\n\r\n\r\n\r\nexport async function getDocuments(id) {\r\n  const url = id ? `${API_BASE}/documents/${id}/` : `${API_BASE}/documents/`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    const text = await res.text().catch(() => \"\");\r\n    throw new Error(`Failed to load document(s): ${res.status} ${text}`);\r\n  }\r\n  return await res.json();\r\n}\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,2BAA2B;AAE9E,OAAO,eAAeC,eAAeA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACpD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,cAAcK,KAAK,QAAQ,EAAE;IAC9DI,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP;IAAQ,CAAC;EAClC,CAAC,CAAC;EACF,IAAI,CAACC,GAAG,CAACO,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAIC,KAAK,CAAC,eAAeV,GAAG,CAACW,MAAM,MAAMH,GAAG,EAAE,CAAC;EACvD;EACA,OAAOR,GAAG,CAACY,IAAI,CAAC,CAAC;AACnB;AAGA,OAAO,eAAeC,UAAUA,CAACJ,IAAI,EAAE;EACrC,MAAMK,QAAQ,GAAG,MAAMb,KAAK,CAAC,GAAGR,QAAQ,QAAQ,EAAE;IAChDS,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEG;IAAK,CAAC;EAC/B,CAAC,CAAC;EAEF,OAAO,MAAMK,QAAQ,CAACF,IAAI,CAAC,CAAC;AAC9B;AAEA,OAAO,eAAeG,cAAcA,CAACC,IAAI,EAAEC,KAAK,EAAE;EAChD,MAAMC,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EACzBE,IAAI,CAACE,MAAM,CAAC,OAAO,EAAEH,KAAK,IAAID,IAAI,CAACK,IAAI,CAAC;EAExC,IAAI;IACF,MAAMrB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,aAAa,EAAE;MAChDS,MAAM,EAAE,MAAM;MACdE,IAAI,EAAEc;IACR,CAAC,CAAC;IAEF,IAAI,CAAClB,GAAG,CAACO,EAAE,EAAE;MACX,MAAME,IAAI,GAAG,MAAMT,GAAG,CAACS,IAAI,CAAC,CAAC;MAC7B,MAAM,IAAIC,KAAK,CAAC,QAAQV,GAAG,CAACW,MAAM,MAAMF,IAAI,EAAE,CAAC;IACjD;IACA,OAAO,MAAMT,GAAG,CAACY,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;IACpC,MAAMA,GAAG;EACX;AACF;AAIA,OAAO,eAAeG,YAAYA,CAACC,EAAE,EAAE;EACrC,MAAMC,GAAG,GAAGD,EAAE,GAAG,GAAGjC,QAAQ,cAAciC,EAAE,GAAG,GAAG,GAAGjC,QAAQ,aAAa;EAC1E,MAAMO,GAAG,GAAG,MAAMC,KAAK,CAAC0B,GAAG,CAAC;EAC5B,IAAI,CAAC3B,GAAG,CAACO,EAAE,EAAE;IACX,MAAME,IAAI,GAAG,MAAMT,GAAG,CAACS,IAAI,CAAC,CAAC,CAACmB,KAAK,CAAC,MAAM,EAAE,CAAC;IAC7C,MAAM,IAAIlB,KAAK,CAAC,+BAA+BV,GAAG,CAACW,MAAM,IAAIF,IAAI,EAAE,CAAC;EACtE;EACA,OAAO,MAAMT,GAAG,CAACY,IAAI,CAAC,CAAC;AACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}