{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\nexport async function sendChatMessage(docId, message) {\n  const res = await fetch(`${API_BASE}/documents/${docId}/chat/`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      message\n    })\n  });\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(`Chat error: ${res.status} - ${txt}`);\n  }\n  return res.json(); // {reply: \"...\"}\n}\nexport async function uploadText(text) {\n  const response = await fetch(\"http://127.0.0.1:8000/api/text/\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      text\n    })\n  });\n  return await response.json();\n}\nexport async function uploadDocument(file, title) {\n  const form = new FormData();\n  form.append(\"file\", file);\n  form.append(\"title\", title || file.name);\n  try {\n    const res = await fetch(`${API_BASE}/documents/`, {\n      method: \"POST\",\n      body: form\n      // IMPORTANT: do not set 'Content-Type' header — the browser will set the right multipart boundary\n    });\n\n    // handle non-2xx\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`HTTP ${res.status} - ${text}`);\n    }\n    return await res.json();\n  } catch (err) {\n    console.error(\"Upload failed:\", err);\n    throw err; // rethrow so UI can show an alert\n  }\n}\nexport async function getDocuments() {\n  const res = await fetch(`${API_BASE}/documents/`);\n  return res.json();\n}\nexport async function getDocument(id) {\n  const res = await fetch(`${API_BASE}/documents/${id}/`);\n  return res.json();\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","sendChatMessage","docId","message","res","fetch","method","headers","body","JSON","stringify","ok","txt","text","Error","status","json","uploadText","response","uploadDocument","file","title","form","FormData","append","name","err","console","error","getDocuments","getDocument","id"],"sources":["F:/github_projects/document_intelligence_chatgpt/frontend/src/services/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\r\n\r\nexport async function sendChatMessage(docId, message) {\r\n  const res = await fetch(`${API_BASE}/documents/${docId}/chat/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ message }),\r\n  });\r\n  if (!res.ok) {\r\n    const txt = await res.text();\r\n    throw new Error(`Chat error: ${res.status} - ${txt}`);\r\n  }\r\n  return res.json(); // {reply: \"...\"}\r\n}\r\n\r\n\r\nexport async function uploadText(text) {\r\n  const response = await fetch(\"http://127.0.0.1:8000/api/text/\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ text }),\r\n  });\r\n\r\n  return await response.json();\r\n}\r\n\r\nexport async function uploadDocument(file, title) {\r\n  const form = new FormData();\r\n  form.append(\"file\", file);\r\n  form.append(\"title\", title || file.name);\r\n\r\n  try {\r\n    const res = await fetch(`${API_BASE}/documents/`, {\r\n      method: \"POST\",\r\n      body: form,\r\n      // IMPORTANT: do not set 'Content-Type' header — the browser will set the right multipart boundary\r\n    });\r\n\r\n    // handle non-2xx\r\n    if (!res.ok) {\r\n      const text = await res.text();\r\n      throw new Error(`HTTP ${res.status} - ${text}`);\r\n    }\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.error(\"Upload failed:\", err);\r\n    throw err; // rethrow so UI can show an alert\r\n  }\r\n}\r\n\r\nexport async function getDocuments() {\r\n  const res = await fetch(`${API_BASE}/documents/`);\r\n  return res.json();\r\n}\r\n\r\nexport async function getDocument(id) {\r\n  const res = await fetch(`${API_BASE}/documents/${id}/`);\r\n  \r\n  return res.json();\r\n}\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,2BAA2B;AAE9E,OAAO,eAAeC,eAAeA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACpD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,cAAcK,KAAK,QAAQ,EAAE;IAC9DI,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP;IAAQ,CAAC;EAClC,CAAC,CAAC;EACF,IAAI,CAACC,GAAG,CAACO,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAIC,KAAK,CAAC,eAAeV,GAAG,CAACW,MAAM,MAAMH,GAAG,EAAE,CAAC;EACvD;EACA,OAAOR,GAAG,CAACY,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB;AAGA,OAAO,eAAeC,UAAUA,CAACJ,IAAI,EAAE;EACrC,MAAMK,QAAQ,GAAG,MAAMb,KAAK,CAAC,iCAAiC,EAAE;IAC9DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEG;IAAK,CAAC;EAC/B,CAAC,CAAC;EAEF,OAAO,MAAMK,QAAQ,CAACF,IAAI,CAAC,CAAC;AAC9B;AAEA,OAAO,eAAeG,cAAcA,CAACC,IAAI,EAAEC,KAAK,EAAE;EAChD,MAAMC,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EACzBE,IAAI,CAACE,MAAM,CAAC,OAAO,EAAEH,KAAK,IAAID,IAAI,CAACK,IAAI,CAAC;EAExC,IAAI;IACF,MAAMrB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,aAAa,EAAE;MAChDS,MAAM,EAAE,MAAM;MACdE,IAAI,EAAEc;MACN;IACF,CAAC,CAAC;;IAEF;IACA,IAAI,CAAClB,GAAG,CAACO,EAAE,EAAE;MACX,MAAME,IAAI,GAAG,MAAMT,GAAG,CAACS,IAAI,CAAC,CAAC;MAC7B,MAAM,IAAIC,KAAK,CAAC,QAAQV,GAAG,CAACW,MAAM,MAAMF,IAAI,EAAE,CAAC;IACjD;IACA,OAAO,MAAMT,GAAG,CAACY,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;IACpC,MAAMA,GAAG,CAAC,CAAC;EACb;AACF;AAEA,OAAO,eAAeG,YAAYA,CAAA,EAAG;EACnC,MAAMzB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,aAAa,CAAC;EACjD,OAAOO,GAAG,CAACY,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,eAAec,WAAWA,CAACC,EAAE,EAAE;EACpC,MAAM3B,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,QAAQ,cAAckC,EAAE,GAAG,CAAC;EAEvD,OAAO3B,GAAG,CAACY,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}