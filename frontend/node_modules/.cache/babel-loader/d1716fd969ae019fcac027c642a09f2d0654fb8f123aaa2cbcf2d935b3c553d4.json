{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\nexport async function uploadText(text) {\n  const response = await fetch(\"http://127.0.0.1:8000/api/text/\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      text\n    })\n  });\n  return await response.json();\n}\nexport async function uploadDocument(file, title) {\n  const form = new FormData();\n  form.append(\"file\", file);\n  form.append(\"title\", title || file.name);\n  try {\n    const res = await fetch(`${API_BASE}/documents/`, {\n      method: \"POST\",\n      body: form\n      // IMPORTANT: do not set 'Content-Type' header — the browser will set the right multipart boundary\n    });\n\n    // handle non-2xx\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`HTTP ${res.status} - ${text}`);\n    }\n    return await res.json();\n  } catch (err) {\n    console.error(\"Upload failed:\", err);\n    throw err; // rethrow so UI can show an alert\n  }\n}\nexport async function getDocuments() {\n  const res = await fetch(`${API_BASE}/documents/`);\n  return res.json();\n}\nexport async function getDocument(id) {\n  const res = await fetch(`${API_BASE}/documents/${id}/`);\n  return res.json();\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","uploadText","text","response","fetch","method","headers","body","JSON","stringify","json","uploadDocument","file","title","form","FormData","append","name","res","ok","Error","status","err","console","error","getDocuments","getDocument","id"],"sources":["F:/github_projects/document_intelligence_chatgpt/frontend/src/services/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api\";\r\n\r\nexport async function uploadText(text) {\r\n  const response = await fetch(\"http://127.0.0.1:8000/api/text/\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ text }),\r\n  });\r\n\r\n  return await response.json();\r\n}\r\n\r\nexport async function uploadDocument(file, title) {\r\n  const form = new FormData();\r\n  form.append(\"file\", file);\r\n  form.append(\"title\", title || file.name);\r\n\r\n  try {\r\n    const res = await fetch(`${API_BASE}/documents/`, {\r\n      method: \"POST\",\r\n      body: form,\r\n      // IMPORTANT: do not set 'Content-Type' header — the browser will set the right multipart boundary\r\n    });\r\n\r\n    // handle non-2xx\r\n    if (!res.ok) {\r\n      const text = await res.text();\r\n      throw new Error(`HTTP ${res.status} - ${text}`);\r\n    }\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.error(\"Upload failed:\", err);\r\n    throw err; // rethrow so UI can show an alert\r\n  }\r\n}\r\n\r\nexport async function getDocuments() {\r\n  const res = await fetch(`${API_BASE}/documents/`);\r\n  return res.json();\r\n}\r\n\r\nexport async function getDocument(id) {\r\n  const res = await fetch(`${API_BASE}/documents/${id}/`);\r\n  return res.json();\r\n}\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,2BAA2B;AAE9E,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAE;EACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;IAC9DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP;IAAK,CAAC;EAC/B,CAAC,CAAC;EAEF,OAAO,MAAMC,QAAQ,CAACO,IAAI,CAAC,CAAC;AAC9B;AAEA,OAAO,eAAeC,cAAcA,CAACC,IAAI,EAAEC,KAAK,EAAE;EAChD,MAAMC,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EACzBE,IAAI,CAACE,MAAM,CAAC,OAAO,EAAEH,KAAK,IAAID,IAAI,CAACK,IAAI,CAAC;EAExC,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMd,KAAK,CAAC,GAAGP,QAAQ,aAAa,EAAE;MAChDQ,MAAM,EAAE,MAAM;MACdE,IAAI,EAAEO;MACN;IACF,CAAC,CAAC;;IAEF;IACA,IAAI,CAACI,GAAG,CAACC,EAAE,EAAE;MACX,MAAMjB,IAAI,GAAG,MAAMgB,GAAG,CAAChB,IAAI,CAAC,CAAC;MAC7B,MAAM,IAAIkB,KAAK,CAAC,QAAQF,GAAG,CAACG,MAAM,MAAMnB,IAAI,EAAE,CAAC;IACjD;IACA,OAAO,MAAMgB,GAAG,CAACR,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOY,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;IACpC,MAAMA,GAAG,CAAC,CAAC;EACb;AACF;AAEA,OAAO,eAAeG,YAAYA,CAAA,EAAG;EACnC,MAAMP,GAAG,GAAG,MAAMd,KAAK,CAAC,GAAGP,QAAQ,aAAa,CAAC;EACjD,OAAOqB,GAAG,CAACR,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,eAAegB,WAAWA,CAACC,EAAE,EAAE;EACpC,MAAMT,GAAG,GAAG,MAAMd,KAAK,CAAC,GAAGP,QAAQ,cAAc8B,EAAE,GAAG,CAAC;EACvD,OAAOT,GAAG,CAACR,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}